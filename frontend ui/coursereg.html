<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Registry</title>
    <style>
  body{
    background-image: url("Assets/regbg.png");
    background-size: cover;
    background-repeat: no-repeat;
    text-align: center;
    margin-top: 260px;


  }
  #registerForm{
   width: 250px;
  margin: auto;
  background-color: rgb(216, 234, 251);
  border: 2px solid rgb(80, 156, 226);
  border-radius: 1em;
  box-shadow: 5px 5px;
  padding: 50px;
  
  }
  .btn{
    cursor: pointer;
    background-color: rgb(21, 134, 134);
   
  }
  
        </style>
</head>
<body >
    <h2>Course Registration Form</h2>
    <form id="registerForm">
    <table>
        <tr>
            <td><label for="name">Name:</label></td>
            <td><input type="text" placeholder="Enter your name" id="name" name="name" required></td>
        </tr>

        <tr>
            <td><label for="emailid">Email:</label></td>
            <td><input type="email" id="emailid" name="emailid" placeholder="Enter your email" required></td>
        </tr>

        <tr>
            <td><label for="coursename">Course:</label></td>
            <td>
                <select id="coursename" name="coursename" required>
                    <option value="java" selected>Java</option>
                    <option value="javascript">JavaScript</option>
                    <option value="sql">SQL</option>
                    <option value="springboot">Spring Boot</option>
                    <option value="python">Python</option>
                    <option value="AIML">AIML</option>
                    <option value="Angular">Angular</option>
                    <option value="C">C</option>
                    <option value="ReactJS">ReactJS</option>
                </select>
            </td>
        </tr>

        <tr >
            <td>
            <button class="btn" type="submit" value="Register">Register</button>
            </td>
        </tr>
    </table>
</form>


<h3 id="responseMessage" style="color: darkblue; margin-top: 20px;"></h3>

<script>
    const form = document.getElementById("registerForm");
    const responseMessage = document.getElementById("responseMessage");

    form.addEventListener("submit", async (event) => {
        event.preventDefault(); 

      
        const data = {
            name: document.getElementById("name").value.trim(),
            emailid: document.getElementById("emailid").value.trim(),
            coursename: document.getElementById("coursename").value
        };

        try {
            const response = await fetch("http://localhost:8080/register", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            });

            const message = await response.text();
            responseMessage.textContent = message;

           
            if (message.toLowerCase().includes("success")) {
                responseMessage.style.color = "green";
            } else {
                responseMessage.style.color = "red";
            }

        } catch  {
            responseMessage.textContent = "⚠️ Server error. Please try again later.";
            responseMessage.style.color = "red";
        }
    });
</script>

</body>
</html>